# Parsing JSON using Python

In this Learning Lab, you learn the basics of parsing JSON content using Python. The example runs a query on the [ACI Always-On Sandbox](https://devnetsandbox.cisco.com/RM/Diagram/Index/5a229a7c-95d5-4cfd-a651-5ee9bc1b30e2?diagramType=Topology "ACI Always-On Sandbox") in order to request data for available configuration on the fabric.  We will then parse this returned data and print it to the screen for human readability.  To learn more about ACI and its API, you can review the DevNet [learning track for ACI programmability](https://developer.cisco.com/learning/tracks/aci-programmability), which covers a variety of different ways to interact with ACI programmatically.  ACI is used as a basis for these labs as the managed object model within ACI allows us to query the same object or class within the fabric and return both XML and JSON data structures, simply based on changing the file-type within the REST URL.

## Objectives

* Understand the basics of reading and parsing HTTP content using Python.
* Learn how to use Python to extract only the JSON data you want using the JSON library.

## Prerequisites

Go through the [Coding 101 lab](lab/coding-101-rest-basics-ga/step/1 "Coding 101 Lab") if you are unfamiliar with Python and retrieving results from a RESTful service and the [Coding 201 lab](lab/coding-201-parsing-xml/step/1 "Coding 201 Parsing XML using Python Lab") for a similar approach to retrieving data using XML.

You should also have a basic familiarity with JSON. Otherwise, consider visiting the [W3Schools JSON Tutorial](https://www.w3schools.com/js/js_json_intro.asp "W3Schools JSON Tutorial") to get a firm base to build upon.

For this lab, use Python 3.4+. To verify your version, enter the following command in a terminal:

```
    python --version
```

If you are on a DevNet Zone station, the correct version of Python should already be installed.

## Step 1: Make an HTTP REST call with Python

To get started, create a simple Python script that can make an HTTP request to the CMX server.

1. Open a text editor and create a file named `get-ap-json.py`.
3. Add the following lines to `get-ap-json.py`:

  ```
  from urllib.request import Request, urlopen
  import ssl
  ssl._create_default_https_context = ssl._create_unverified_context
  req = Request('https://cmxlocationsandbox.cisco.com/api/config/v1/maps/info/DevNetCampus/DevNetBuilding/DevNetZone')
  req.add_header('Authorization', 'Basic bGVhcm5pbmc6bGVhcm5pbmc=')
  response = urlopen(req)
  response_string = response.read().decode('utf-8')
  print(response_string)
  response.close()
  ```

  This snippet:

  - Imports the required `Request` and `urlopen` libraries.
  - Constructs a request to the CMX URI.
  - Adds basic authentication to the request.
  - Opens the request and gets a response from the CMX URI.
  - Parses the response as a string and prints it to the console.<br><br>

4. Save the `get-ap-json.py` file. To download or review the current code, you can get it from GitHub [here](https://github.com/CiscoDevNet/coding-skills-sample-code/blob/master/coding202-parsing-json/get-ap-json-1.py).

5. Open a command prompt.<br>
  <br>
  For Windows, enter:

  ```
  cd %USERPROFILE%\Desktop
  ```

  For OS X, enter:

  ```
  cd ~/Desktop
  ```

6. In the command prompt window, enter:

  ```
  python get-ap-json.py
  ```

7. The command line/terminal displays the JSON data retrieved by the script.

![](assets/images/json-output.png)

--------------------------------------------------------------------------------

This presentation of the JSON data isn't very useful. Next, clean up the presentation to get a better view of the structure and content of the data.

### Next step

Proceed to Step 2: Use the JSON Python library.
